= Архитектура клиент-сервер
:imagesdir: ../assets/img/application-architecture

== Взаимодействие серверов с клиентами

В концепции *клиент-сервер* участвуют две стороны:

* *клиент* - заказчик той или иной услуги
* *сервер* - поставщик услуг.

Клиент и сервер физически представляют собой программы, например, клиентом может являться браузер, а сервером: *TTP* или *MySQL* сервер.

*Клиент и сервер* взаимодействуют друг с другом в сети Интернет или в любой другой компьютерной сети при помощи различных сетевых протоколов, например, *IP* или *HTTP* протокола. Каждый протокол позволяет оказывать ту или иную услугу. Например, при помощи HTTP протокола браузер отправляет специальное HTTP сообщение, в котором указано какую информацию и в каком виде он хочет получить от сервера. Сервер, получив такое сообщение, отсылает браузеру в ответ похожее по структуре сообщение, в котором содержится нужная информация, например HTML документ.

Сообщения, посылаемые клиентами, получили названия HTTP запросы. Такие запросы имеют специальные методы, позволяющие серверу говорить как обрабатывать сообщение. Сообщения, которые посылает сервер, получили название HTTP ответы. Они содержат помимо полезной информации еще и специальные коды состояния, которые позволяют браузеру узнать как сервер понял его запрос.

В основе взаимодействия клиент-сервер лежит принцип того, что такое взаимодействие начинает клиент, сервер лишь отвечает клиенту и сообщает о том, может ли он предоставить услугу и, если может, то на каких условиях.

Клиентское и серверное программное обеспечение обычно установлено на разных машинах, но также они могут работать и на одном компьютере. Данная концепция взаимодействия была разработана для того, чтобы разделить нагрузку между участниками процесса обмена информацией, а также для того, чтобы разделить программный код поставщика и заказчика.

.Упрощенная схема взаимодействия клиент-сервер
image::client-server.jpg[Простая схема взаимодействия клиент-сервер,align=center]

Видно, что к одному серверу может обращаться сразу несколько клиентов (на одном сайте может находиться несколько посетителей). Также стоит заметить, что количество одновременно взаимодействующих клиентов с сервером зависит от мощности сервера и от того, что хочет получить клиент от сервера.

== Двухуровневая, трёхуровневая и многоуровневая архитектура клиент-сервер

*Архитектура клиент-сервер* определяет лишь общие принципы взаимодействия между компьютерами, детали взаимодействия определяют различные протоколы. Данная концепция говорит, что нужно разделять машины в сети на _клиентские_, которым всегда что-то надо и на _серверные_, которые дают то, что надо. При этом взаимодействие всегда начинает клиент, а правила, по которым происходит взаимодействие описывает протокол.

*Существует два вида архитектуры взаимодействия клиент-сервер:* первый получил название *двухуровневая архитектура* клиент-серверного взаимодействия, второй – *трехуровневая архитектура клиент-сервер*, последняя в свою очередь может быть расширена до *многоуровневой* архитектуры взаимодействия клиент-сервер.

*Принцип работы двухуровневой архитектуры* взаимодействия клиент-сервер заключается в том, что обработка запроса происходит на одном сервере без использования сторонних ресурсов, как правило, такой сервер может принимать HTTP-запросы от клиентов и выдающий им HTTP-ответы. Двухзвенная архитектура предъявляет жесткие требования к производительности сервера, но в то же время является очень надежной.

.Двухуровневую модель взаимодействия клиент-сервер
image::two-star-architecture.png[Двух звездная архитектура,align=center]

Здесь четко видно, что *между двумя узлами расположены три базовых компонента*. Есть *клиент*, который позволяет человеку сделать запрос, и есть *сервер*, который обрабатывает запрос клиента. *База данных*, позволяющая упорядоченно хранить данные об объекте, в свою очередь не является частью веб-сервера.

*Трехуровневая модель клиент-сервер* - это сетевое приложение, может быть разделено на *две и более частей*. *Первый уровень* такой модели – это *клиент*, который позволяет писать различные SQL запросы к базе данных. *Второй уровень* – это *движок СУБД*, который интерпретирует запросы и реализует взаимодействие между клиентом и файловой системой, а *третий уровень – это хранилище данных.*

image::three-star-architecture.png[Трехзвездная архитектура,align=center]

*Трехуровневая* архитектура может быть расширена до *многоуровневой* архитектуры взаимодействия клиент-сервер. *Суть многоуровневой архитектуры заключается в том,* что запрос клиента обрабатывается сразу несколькими серверами. Такой подход позволяет значительно снизить нагрузку на сервер из-за того, что происходит распределение операций, но в то же самое время данный подход не такой надежный, как двухзвенная архитектура.

.Пример многоуровневой архитектуры клиент-сервер
image::multi-tier-architecture.png[Двухзвездная архитектура,align=center]

== Преимущества и недостатки архитектуры клиент-сервер

*Преимуществом* модели взаимодействия *клиент-сервер* является:

* программный код клиентского приложения и серверного разделен. Это позволяет понизить требования к машинам клиентов, так как большая часть вычислительных операций будет производиться на сервере;
* архитектура клиент-сервер довольно гибкая и позволяет администратору сделать локальную сеть более защищенной.

К *недостаткам* модели взаимодействия *клиент-сервер* можно отнести:

* стоимость серверного оборудования значительно выше клиентского;
* сервер должен обслуживать специально обученный и подготовленный человек;
* если в локальной сети ломается сервер, то и клиенты не смогут работать;
* в качестве частного случая можно привести пример: мощности сервера не всегда хватает, чтобы удовлетворить запросы клиентов.

== Тонкий и толстый клиент

Все *клиенты* в клиент-серверной архитектуре условно делятся на два подтипа: *толстые клиенты* и *тонкие клиенты*.

*Толстый клиент* — клиент, выполняющий запрашиваемые со стороны пользователя манипуляции независимо от ведущего сервера. Основной сервер в такой вариации системной архитектуры может применяться как особое хранилище информации, обработка и конечное предоставление которых просто переносится на локальную машину пользователя.

*Толстый клиент* – это рабочая машина или ПК, которые функционируют на основе своей ОС и наполнены полноценным набором ПО для требуемых задач пользователя. Если взглянуть с программной точки зрения, понятными примерами толстых клиентов можно считать программы для совместной деятельности, если они изначально установлены на определенные вычислительные устройства. Например: _Yahoo Messenger_, _Office 365_, _Microsoft Outlook_.

*Преимущества толстых клиентов:*

* Большая функциональность;
* Наличие многопользовательского режима;
* Возможность работы в режиме оффлайн;
* Мгновенное быстродействие;
* Минимальная зависимость от сложных серверов.

*Недостатки толстых клиентов:*

* Все рабочие машины на постоянной основе нуждаются в техническом обслуживании;
* Необходимость в индивидуальном обновлении аппаратного ПО каждого клиента до уровня программного обеспечения, которое будет использоваться;
* Массивные объемы дистрибутивов;
* Полная зависимость от платформ, под которую данные клиенты были созданы.

*Тонкий клиент* — вид клиента, который может переносить выполнение задач по обработке информации на сервер, не применяя свои мощности по вычислению для их внедрения. Все вычислительные ресурсы подобного клиента максимально ограничены, важно, чтобы их хватало для старта нужного сетевого ПО, применяя, к примеру, веб-интерфейс.

Одним из наиболее распространенных примеров такого типа клиента считается ПК с заранее установленным веб-браузером, который применяется для функционирования с веб-программами.

*Характерная черта тонких клиентов* — применение терминального режима функционирования. В такой ситуации, терминальный сервер применяется для процесса отправки и получения информации пользователя, что и является базовым отличием от процесса независимой обработки информации в толстых клиентах.

*Плюсы тонкого клиента:*

* Минимальное аппаратное обслуживание;
* Низкий риск возникновения неисправности;
* Минимальные технические требования к аппаратному оборудованию.

*Недостатки тонкого клиента:*

* При сбое на сервере «пострадают» все подключенные пользователи;
* Нет возможности работать без активного подключения к сети;
* При взаимодействии с большим массивом данных может снижаться объем производительности основного сервера.

*Базовые отличия между ними* – это варианты обработки данных. *Толстые клиенты* работают с информацией на основе собственных аппаратных и программных возможностей, в то же время *тонкие* применяют ПО центрального сервера, только чтобы обработать данные, предоставляя системе лишь требуемый графический интерфейс для выполнения работы пользователем. Это значит, что в роли тонких клиентов иногда мы можем увидеть устаревшие или не очень производительные ПК.